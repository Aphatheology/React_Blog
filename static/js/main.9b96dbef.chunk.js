(this["webpackJsonpfirebase-blog"]=this["webpackJsonpfirebase-blog"]||[]).push([[0],{274:function(e,t,c){},275:function(e,t,c){},317:function(e,t){},319:function(e,t){},329:function(e,t){},331:function(e,t){},356:function(e,t){},358:function(e,t){},359:function(e,t){},364:function(e,t){},366:function(e,t){},372:function(e,t){},374:function(e,t){},393:function(e,t){},405:function(e,t){},408:function(e,t){},529:function(e,t){function c(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}c.keys=function(){return[]},c.resolve=c,e.exports=c,c.id=529},551:function(e,t,c){"use strict";c.r(t);var n=c(7),r=c.n(n),i=c(265),a=c.n(i),s=(c(274),c(275),c(25)),o=c(11),l=c(16),j=c(38),u=c(37),b=c(266),d=c(20),O=c(100),m=Object(b.a)({apiKey:"AIzaSyCm2-vBF_Nj-jkLH_PsHVQBxARfwm2379Q",authDomain:"betablog-9c10a.firebaseapp.com",projectId:"betablog-9c10a",storageBucket:"betablog-9c10a.appspot.com",messagingSenderId:"489934495566",appId:"1:489934495566:web:283eace4748b85351f881f"}),p=(Object(O.a)(m),Object(l.i)(m)),h=Object(d.g)(m),f=c(4),x=c(0),g=c.n(x),v=(c(277),c(103)),y=c.n(v),w=c(10);y.a.config({cloud_name:"aphatheology",api_key:"965442422362446",api_secret:"WLD-8ZsjWK87TQ2dMkyz3YjrHg4"});var k=function(e){var t=e.id,c=function(){var e=Object(f.a)(g.a.mark((function e(){var c,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(l.g)(p,"Articles",t),e.next=3,Object(l.h)(c);case 3:return(n=e.sent).exists()?(r=n.data().imgPublicId)&&y.a.v2.uploader.destroy(r,(function(e,t){console.log(t,e)})).then((function(e){return console.log(e)})).catch((function(e){return console.log("Something went wrong, please try again later.")})):console.log("No such document!"),e.next=7,Object(l.f)(Object(l.g)(p,"Articles",t));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("button",{onClick:c,children:"Delete Article"})};var A=function(e){var t=e.id,c=e.likes,n=Object(j.a)(h),r=Object(o.a)(n,1)[0],i=Object(l.g)(p,"Articles",t);return Object(w.jsx)("button",{onClick:function(){null!==c&&void 0!==c&&c.includes(r.uid)?Object(l.m)(i,{likes:Object(l.c)(r.uid)}).catch((function(e){console.log(e)})):Object(l.m)(i,{likes:Object(l.d)(r.uid)}).catch((function(e){console.log(e)}))},style:{cursor:"pointer",color:null!==c&&void 0!==c&&c.includes(r.uid)?"red":"blue"},children:"Like"})};var C=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],r=t[1],i=Object(j.a)(h),a=Object(o.a)(i,1)[0];return Object(n.useEffect)((function(){var e=Object(l.e)(p,"Articles"),t=Object(l.l)(e,Object(l.k)("createdAt","desc"));Object(l.j)(t,(function(e){var t=e.docs.map((function(e){return Object(s.a)({id:e.id},e.data())}));r(t)}))}),[]),Object(w.jsx)("div",{className:"articles",children:0===c.length?Object(w.jsx)("p",{children:"No Articles found"}):c.map((function(e){var t=e.id,c=e.title,n=e.description,r=e.imgUrl,i=e.createdAt,s=e.createdBy,o=e.userId,l=e.likes,j=e.comments;return Object(w.jsxs)("div",{className:"eacharticle",children:[Object(w.jsx)("img",{src:r,alt:"Article pics"}),Object(w.jsxs)("div",{children:[Object(w.jsx)(u.b,{to:"/article/".concat(s,"/").concat(t),children:Object(w.jsxs)("h2",{children:[c," "]})}),Object(w.jsxs)("p",{children:["Created on ",i.toDate().toDateString()," by ",s]}),Object(w.jsx)("p",{className:"onlythreelines",children:n}),a&&a.uid===o&&Object(w.jsx)(k,{id:t}),a&&Object(w.jsx)(A,{id:t,likes:l}),Object(w.jsxs)("p",{children:[null===l||void 0===l?void 0:l.length," ",l.length>1?"likes":"like"," and ",null===j||void 0===j?void 0:j.length," ",j.length>1?"comments":"comment"]})]})]},t)}))})};var N=function(){var e=Object(j.a)(h),t=Object(o.a)(e,1)[0];return Object(w.jsxs)("div",{className:"navbar",children:[Object(w.jsx)(u.b,{to:"/",children:"Home"}),t&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("p",{children:["Signed in as ",t.displayName]}),Object(w.jsx)("button",{onClick:function(){Object(d.m)(h)},children:"Sign Out"})]})]})},S=c(5);var D=function(){var e=Object(j.a)(h),t=Object(o.a)(e,1)[0],c=Object(n.useState)({title:"",description:"",imgUrl:"",createdAt:l.a.now().toDate()}),r=Object(o.a)(c,2),i=r[0],a=r[1],b=Object(n.useRef)();function d(e){var t=e.target,c=t.name,n=t.value;a((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(S.a)({},c,n))}))}return Object(w.jsx)("div",{className:"newarticle",children:t?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h2",{children:"Create new Article"}),Object(w.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),i.title&&""!==i.title.trim()&&i.description&&""!==i.description.trim()&&i.imgUrl){var c=new FormData;c.append("file",i.imgUrl),c.append("upload_preset","article"),c.append("cloud_name","aphatheology"),fetch("https://api.cloudinary.com/v1_1/aphatheology/image/upload",{method:"post",body:c}).then((function(e){return e.json()})).then((function(e){var c=Object(l.e)(p,"Articles");Object(l.b)(c,{title:i.title,description:i.description,imgUrl:e.url,createdAt:l.a.now().toDate(),createdBy:t.displayName,userId:t.uid,likes:[],comments:[],imgPublicId:e.public_id})})).then((function(){a({title:"",description:"",imgUrl:""}),b.current.value=""})).catch((function(e){return console.log(e)}))}else alert("Please fill all the fields")},children:[Object(w.jsx)("input",{type:"text",name:"title",value:i.title,placeholder:"Article Title",onChange:function(e){return d(e)},required:!0}),Object(w.jsx)("textarea",{type:"text",name:"description",value:i.description,onChange:function(e){return d(e)},required:!0,children:" "}),Object(w.jsx)("input",{type:"file",accept:"image/*",name:"imgUrl",onChange:function(e){return function(e){var t=e.target.files[0];a((function(e){return Object(s.a)(Object(s.a)({},e),{},{imgUrl:t})}))}(e)},ref:b,required:!0}),Object(w.jsx)("button",{children:"Submit"})]})]}):Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("p",{children:[Object(w.jsx)(u.b,{to:"/login",children:"Login"})," to create new Article. ",Object(w.jsx)("br",{}),"Don't have an account? ",Object(w.jsx)(u.b,{to:"/register",children:"Register "})]})})})},U=c(14);var I=function(){var e=Object(n.useState)({email:"",username:"",password:""}),t=Object(o.a)(e,2),c=t[0],r=t[1],i=Object(U.f)();function a(e){var t=e.target,c=t.name,n=t.value;r((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(S.a)({},c,n))}))}function l(){return(l=Object(f.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.f)(h,c.email,c.password);case 3:Object(d.p)(h.currentUser,{displayName:c.username}),i("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(w.jsxs)("div",{className:"register",children:[Object(w.jsx)("h1",{children:"Register"}),Object(w.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(w.jsx)("input",{type:"email",value:c.email,name:"email",onChange:a,placeholder:"Email"}),Object(w.jsx)("input",{type:"text",value:c.username,name:"username",onChange:a,placeholder:"Username"}),Object(w.jsx)("input",{type:"password",value:c.password,name:"password",onChange:a,placeholder:"Password"}),Object(w.jsx)("button",{onClick:function(){return l.apply(this,arguments)},children:"Submit"})]})]})};var _=function(){var e=Object(n.useState)({email:"",password:""}),t=Object(o.a)(e,2),c=t[0],r=t[1],i=Object(U.f)();function a(e){var t=e.target,c=t.name,n=t.value;r((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(S.a)({},c,n))}))}function l(){return(l=Object(f.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.k)(h,c.email,c.password);case 3:i("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(w.jsxs)("div",{className:"register",children:[Object(w.jsx)("h1",{children:"Login"}),Object(w.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(w.jsx)("input",{type:"email",value:c.email,name:"email",onChange:a,placeholder:"Email"}),Object(w.jsx)("input",{type:"password",value:c.password,name:"password",onChange:a,placeholder:"Password"}),Object(w.jsx)("button",{onClick:function(){return l.apply(this,arguments)},children:"Login"})]})]})},E=c(553);var B=function(e){var t=e.id,c=Object(n.useState)([]),r=Object(o.a)(c,2),i=r[0],a=r[1],s=Object(n.useState)(""),u=Object(o.a)(s,2),b=u[0],d=u[1],O=Object(j.a)(h),m=Object(o.a)(O,1)[0],f=Object(l.g)(p,"Articles",t);return Object(n.useEffect)((function(){var e=Object(l.g)(p,"Articles",t);Object(l.j)(e,(function(e){a(e.data().comments)}))}),[]),Object(w.jsxs)("div",{children:[m&&Object(w.jsxs)("div",{className:"comment",children:[Object(w.jsx)("input",{type:"text",value:b,name:"comment",onChange:function(e){return d(e.target.value)},placeholder:"Enter comment"}),Object(w.jsx)("button",{onClick:function(e){Object(l.m)(f,{comments:Object(l.d)({user:m.uid,userName:m.displayName,comment:b,createdAt:new Date,commentId:Object(E.a)()})}).then((function(){return d("")}))},children:"Post Comment"})]}),null!==i&&i.map((function(e){var t=e.commentId,c=e.userName,n=e.user,r=e.comment,i=e.createdAt;return Object(w.jsxs)("div",{children:[Object(w.jsx)("h4",{style:{color:null!==m&&n===m.uid?"green":"blue"},children:c}),Object(w.jsx)("p",{children:r}),null!==m&&n===m.uid&&Object(w.jsx)("button",{onClick:function(){return function(e){Object(l.m)(f,{comments:Object(l.c)(e)}).catch((function(e){console.log(e)}))}({commentId:t,user:n,comment:r,userName:c,createdAt:i})},children:"Delete Comment"})]},t)}))]})};var F=function(){var e=Object(U.g)().id,t=Object(n.useState)(null),c=Object(o.a)(t,2),r=c[0],i=c[1],a=Object(j.a)(h),u=Object(o.a)(a,1)[0];return Object(n.useEffect)((function(){var t=Object(l.g)(p,"Articles",e);Object(l.j)(t,(function(e){i(Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id}))}))}),[]),Object(w.jsx)("div",{children:r&&Object(w.jsxs)("div",{children:[Object(w.jsx)("h2",{children:r.title}),Object(w.jsxs)("p",{children:["Created on ",r.createdAt.toDate().toDateString()," by ",r.createdBy]}),Object(w.jsx)("img",{src:r.imgUrl}),Object(w.jsx)("p",{children:r.description}),u&&Object(w.jsx)(A,{id:e,likes:r.likes}),Object(w.jsx)(B,{id:r.id})]})})};var L=function(){return Object(w.jsx)("div",{className:"App",children:Object(w.jsxs)(u.a,{children:[Object(w.jsx)(N,{}),Object(w.jsxs)(U.c,{children:[Object(w.jsx)(U.a,{path:"/register",element:Object(w.jsx)(I,{})}),Object(w.jsx)(U.a,{path:"/login",element:Object(w.jsx)(_,{})}),Object(w.jsx)(U.a,{path:"/",element:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(D,{}),Object(w.jsx)(C,{})]})}),Object(w.jsx)(U.a,{path:"/article/:createdBy/:id",element:Object(w.jsx)(F,{}),children:" "})]})]})})};a.a.createRoot(document.getElementById("root")).render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(L,{})}))}},[[551,1,2]]]);
//# sourceMappingURL=main.9b96dbef.chunk.js.map